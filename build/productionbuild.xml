<project default="compileFlex" basedir="." name="Production">
    <property file="local.build.properties"/>
    <taskdef resource="flexTasks.tasks" classpath="${flex.sdk.dir}/ant/lib/flexTasks.jar"/>
    <taskdef resource="yuicompressor.tasks" classpath="${flex.sdk.dir}/ant/lib/yuicompressor-taskdef-1.0.jar"/>

    <taskdef name="S3Upload" classname="dak.ant.taskdefs.S3Upload"/>
    <taskdef name="OrderInstances" classname="com.easyinsight.watchdog.updatetask.AppInstanceTask"/>

    <taskdef name="UpdateDB" classname="com.easyinsight.database.ant.DatabaseUpdateTask"/>

    <taskdef name="SWFAnalysis" classname="com.easyinsight.swfanalysis.SWFAnalysis"/>
    <taskdef name="SWFSize" classname="com.easyinsight.swfanalysis.ArtifactSize"/>

    <taskdef name="migration" classname="com.easyinsight.database.ant.DatabaseMigrationTask"/>


    <property name="FLEX_HOME" value="${flex.sdk.dir}"/>

    <property name="watchdog.out.path" value="../java/out/watchdog/"/>
    <property name="watchdog.archive.path" value="${watchdog.out.path}/watchdog"/>

    <property name="code.path" value="../java/out/code"/>
    <property name="webapp.path" value="${code.path}/webapp"/>
    <property name="flex.path" value="${webapp.path}/${build.vcs.number}"/>

    <property name="test.path" value="../java/out/test"/>
    <property name="reports.tests" value="../java/out/test/reports"/>

    <property name="ei.key" value="xrnnCqtaFhZN"/>
    <property name="ei.secret.key" value="IzxHGLKiErchVLdo"/>
    <property name="size.api.key" value="LeKXRECmALcL"/>
    <property name="analysis.api.key" value="JeSfljXxeIcw"/>

    <property name="flex.prefix" value="${build.flex.prefix}"/>
    <property name="deploy.operation" value="${build.deploy.operation}" />
    <property name="deploy.role" value="${build.deploy.role}" />

    <target name="testVCS">
        <echo>Blah ${build.vcs.number}</echo>
        <propertyfile file="../java/src/version.properties">
            <entry key="ei.version" type="string" operation="=" value="${build.vcs.number}"/>
        </propertyfile>
        <property name="build.number" value="${build.vcs.number}"/>
    </target>

    <target name="shutdownInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Backend" operation="shutdown" />
    </target>

    <target name="shutdownStagingInstances">
        <parallel>
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="StagingWorker" operation="shutdown" />
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Staging" operation="shutdown" />
        </parallel>
    </target>

    <target name="shutdownLargeInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Frontend" operation="shutdown" />
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="API" operation="shutdown" />
   </target>

    <target name="downloadStagingInstances">
        <parallel>
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="StagingWorker" operation="download" />
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Staging" operation="download" />
        </parallel>
    </target>

    <target name="downloadBackendInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="aBackend" operation="download" />
    </target>

    <target name="downloadLargeInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Frontend" operation="download"/>
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="API" operation="download"/>
    </target>

    <target name="updateLargeInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Frontend" operation="update" />
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="API" operation="update" />
    </target>

    <target name="updateStagingInstances">
        <parallel>
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="StagingWorker" operation="update" />
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Staging" operation="update" />
        </parallel>
    </target>

    <target name="updateInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Backend" operation="update" />
    </target>

    <target name="startStagingInstances">
        <parallel>
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="StagingWorker" operation="startup" />
            <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Staging" operation="startup" />
        </parallel>
    </target>

    <target name="startLargeInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Frontend" operation="startup" />
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="API" operation="startup" />
    </target>

    <target name="startInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="Backend" operation="startup" />
    </target>

    <target name="orderInstances">
        <OrderInstances userName="einsight" password="eJAqp0Q~j!n>L" role="${deploy.role}" operation="${deploy.operation}" />
    </target>


    <target name="cleanGZ">
        <exec executable="bash" dir="../website">
            <arg value="-c" />
            <arg value="find . -name &quot;*.gz&quot; -print0 | xargs -0 rm" />
        </exec>
    </target>
    <target name="cleanMin">
            <exec executable="bash" dir="../website">
                <arg value="-c" />
                <arg value="find . -name &quot;*.min.css&quot; -print0 | xargs -0 rm" />
            </exec>
            <exec executable="bash" dir="../website">
                <arg value="-c" />
                <arg value="find . -name &quot;*.min.js&quot; -print0 | xargs -0 rm" />
            </exec>
        </target>
    <target name="minify" depends="cleanMin">
        <yuicompressor todir="../website">
                <fileset dir="../website" includes="**/**.css,**/**.js">
                    <exclude name="**/**/angular.js" />
                    <exclude name="**/**/route-segment.js" />
                    <exclude name="**/**/intro.js" />
                    <exclude name="**/**/outro.js" />
                    <exclude name="**/**/data_sources.js" />
                    <exclude name="**/**/account.js" />
                    <exclude name="**/**/scheduling.js" />
                </fileset>
                <mapper>
                      <globmapper from="*.css" to="*.min.css"/>
                      <globmapper from="*.js" to="*.min.js"/>
                </mapper>
        </yuicompressor>
    </target>

    <target name="compressFiles" depends="minify,cleanGZ">
        <exec executable="gzip" dir="../website">
            <arg value="-rfkv9" />
            <arg value="." />
        </exec>
    </target>

    <target name="updateDatabase">
        <UpdateDB/>
    </target>

    <target name="migration">
        <migration sqlDirectory="java/sql" databaseName="${database.name}" databaseUserName="${database.username}"
                   databasePassword="${database.password}"/>
    </target>

    <target name="tests">
        <delete dir="${test.path}/classes"/>
        <mkdir dir="${test.path}/classes"/>
        <delete dir="${reports.tests}"/>
        <mkdir dir="${reports.tests}"/>
       <javac destdir="${test.path}/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src"
               excludes="**/*.smap">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="**/test/apithrottling/**"/>
        </javac>
        <junit printsummary="yes" haltonfailure="no" maxmemory="256m">
            <classpath>
                <pathelement location="${test.path}/classes"/>
                <pathelement location="../java/lib/cxf2"/>
                <pathelement location="../java/src"/>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>

            <formatter type="plain"/>

            <batchtest fork="yes" todir="${reports.tests}">
                <fileset dir="../java/src">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

    <target name="appwatchdog">
        <mkdir dir="${watchdog.archive.path}"/>
        <javac destdir="${watchdog.archive.path}"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../build/src"
               excludes="**/*.smap">
            <classpath>
                <fileset dir="../build/lib">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="tags/**"/>
        </javac>
        <copyfile src="../build/src/realm.properties"
                  dest="${watchdog.archive.path}/realm.properties" />
        <unzip dest="${watchdog.archive.path}">
            <fileset dir="../build/lib">
                <include name="*.jar"/>
            </fileset>
        </unzip>
        <jar destfile="${watchdog.out.path}/watchdog.jar" baseDir="${watchdog.archive.path}"/>
    </target>

    <target name="clean">
        <delete dir="${webapp.path}"/>
        <delete dir="${watchdog.archive.path}"/>
        <delete dir="${test.path}/classes"/>
        <delete dir="${reports.tests}"/>
    </target>

    <target name="archive" depends="compileFlex">
        <zip destfile="${code.path}/code.zip" baseDir="${webapp.path}"/>
    </target>

    <target name="quick" depends="clean">
        <mkdir dir="${webapp.path}"/>
        <javac destdir="${webapp.path}/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
        </javac>
    </target>

    <target name="compileJava" depends="clean">
        <mkdir dir="${webapp.path}/WEB-INF/classes"/>
        <mkdir dir="${webapp.path}/assets"/>
        <mkdir dir="${webapp.path}/assets/icons"/>
        <mkdir dir="${webapp.path}/assets/icons/32x32"/>
        <mkdir dir="${webapp.path}/WEB-INF/flex"/>
        <mkdir dir="${webapp.path}/META-INF"/>
        <mkdir dir="${webapp.path}/WEB-INF/lib"/>

        <javac destdir="${webapp.path}/WEB-INF/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/servlet">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="**/test/**"/>
        </javac>
        <copy flatten="true" todir="${webapp.path}/WEB-INF/lib">
            <fileset dir="../java/lib">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/flex">
            <fileset dir="../java/web/WEB-INF/flex">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/classes">
            <fileset dir="../java/lib/cxf2">
                <include name="**/*.wsdl"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/classes">
            <fileset dir="../java/src">
                <include name="**/*.properties"/>
                <include name="**/*.xml"/>
                <include name="**/*.js"/>
                <include name="**/*.jks"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/META-INF">
            <fileset dir="../java/web/META-INF">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF">
            <fileset dir="../java/web/WEB-INF">
                <include name="*.xml"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}">
            <fileset dir="../java/web">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/assets/icons/32x32">
            <fileset dir="../java/web/assets/icons/32x32">
                <include name="**/*"/>
            </fileset>
        </copy>
    </target>

    <target name="compileFlex" depends="testVCS, compileJava, compileCoreSWC, apps, modules4, modules6, modules7, modules8">
    </target>

    <target name="quickArchive" depends="compileJava, compileCoreSWC, compileFlexOptimized">
        <zip destfile="${code.path}/code.zip" baseDir="${webapp.path}"/>
    </target>

    <target name="compileCoreSWC">
        <compc output="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc">
            <load-config filename="${teamcity.build.checkoutDir}/flex/swc-optimized-config.xml"/>
            <source-path path-element="${teamcity.build.checkoutDir}/flex/swc/core"/>
            <include-sources dir="${teamcity.build.checkoutDir}/flex/swc/core" includes="*"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="https://www.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="https://www.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="https://www.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="https://www.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="https://www.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="https://www.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>
        </compc>
        <unzip src="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc" dest="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp"/>
        <rename src="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/library.swf" dest="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swf"/>
        <copy file="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swf" todir="${flex.path}"/>
        <copy file="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc" todir="${teamcity.build.checkoutDir}/flex/libs/rsl"/>
        <delete dir="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp"/>
    </target>

    <macrodef name="buildSWF">
        <attribute name="mainMXML"/>
        <attribute name="swfName"/>
        <attribute name="buildFile"/>
        <sequential>
            <mxmlc file="${teamcity.build.checkoutDir}/flex/src/@{mainMXML}" output="${flex.path}/@{swfName}.swf" keep-generated-actionscript="false"
                   static-rsls="false" target-player="10.0.0" actionscript-file-encoding="utf8" incremental="true">
                <load-config filename="${teamcity.build.checkoutDir}/flex/@{buildFile}"/>
                <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                    <url rsl-url="https://www.easy-insight.com/framework_3.5.0.12683.swz"/>
                    <url rsl-url="https://www.easy-insight.com/framework_3.5.0.12683.swf"/>
                </runtime-shared-library-path>

                <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                    <url rsl-url="https://www.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                    <url rsl-url="https://www.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
                </runtime-shared-library-path>

                <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                    <url rsl-url="https://www.easy-insight.com/rpc_3.5.0.12683.swz"/>
                    <url rsl-url="https://www.easy-insight.com/rpc_3.5.0.12683.swf"/>
                </runtime-shared-library-path>
                <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                    <url rsl-url="https://${flex.prefix}.easy-insight.com/app/${build.number}/EICore.swf"/>
                </runtime-shared-library-path>
            </mxmlc>
        </sequential>
    </macrodef>

    <target name="modules4" depends="app.embeddeddashboard, app.seleniumdashboard"/>
    <target name="modules6" depends="perspective.spreadsheetwizard, perspective.connectiondetail, perspective.spreadsheetupdatewizard"/>
    <target name="modules7" depends="perspective.kpiwindow,perspective.datasourceadmin, app.embeddedcomponentapplication"/>
    <target name="modules8" depends="report.heatmap, report.gantt, app.connectionadmin"/>
    <target name="apps" depends="compileFlexOptimized, app.embeddedreport, app.selenium, app.admin"/>

    <target name="compileFlexOptimized">
        <buildSWF mainMXML="PrimaryWorkspace.mxml" swfName="PrimaryWorkspace" buildFile="core-optimized-config.xml"/>
    </target>

    <target name="app.embeddedreport">
        <buildSWF mainMXML="EmbeddedInsight.mxml" swfName="EmbeddedInsight" buildFile="embedded-insight.xml"/>
    </target>

    <target name="app.embeddedcomponentapplication">
        <buildSWF mainMXML="EmbeddedComponentApplication.mxml" swfName="EmbeddedComponentApplication" buildFile="embedded-component-application.xml"/>
    </target>

    <target name="app.embeddedlist">
        <buildSWF mainMXML="EmbeddedList.mxml" swfName="EmbeddedList" buildFile="embedded-list.xml"/>
    </target>

    <target name="app.embeddeddashboard">
        <buildSWF mainMXML="EmbeddedDashboard.mxml" swfName="EmbeddedDashboard" buildFile="embedded-dashboard.xml"/>
    </target>

    <target name="app.selenium">
        <buildSWF mainMXML="SeleniumReportView.mxml" swfName="SeleniumReportView" buildFile="selenium-report.xml"/>
    </target>

    <target name="app.embeddedreporteditor">
        <buildSWF mainMXML="EmbeddedReportEditor.mxml" swfName="EmbeddedReportEditor" buildFile="embedded-report-editor.xml"/>
    </target>

    <target name="app.embeddeddashboardeditor">
        <buildSWF mainMXML="EmbeddedDashboardEditor.mxml" swfName="EmbeddedDashboardEditor" buildFile="embedded-dashboard-editor.xml"/>
    </target>

    <target name="app.embeddedconfiguredatasource">
        <buildSWF mainMXML="EmbeddedConfigureDataSource.mxml" swfName="EmbeddedConfigureDataSource" buildFile="embedded-configure-datasource.xml"/>
    </target>

    <target name="app.seleniumdashboard">
        <buildSWF mainMXML="SeleniumDashboardView.mxml" swfName="SeleniumDashboardView" buildFile="selenium-dashboard.xml"/>
    </target>

    <target name="app.admin">
        <buildSWF mainMXML="AdministrationApplication.mxml" swfName="AdministrationApplication" buildFile="administration-app.xml"/>
    </target>

    <target name="app.font">
        <buildSWF mainMXML="FontApplication.mxml" swfName="FontApplication" buildFile="font-customizer.xml"/>
    </target>

    <target name="perspective.spreadsheetwizard">
        <buildSWF mainMXML="com/easyinsight/customupload/wizard/SpreadsheetWizard.mxml" swfName="SpreadsheetWizard" buildFile="perspectives/spreadsheet-wizard-module.xml"/>
    </target>

    <target name="perspective.spreadsheetupdatewizard">
        <buildSWF mainMXML="com/easyinsight/customupload/wizard/SpreadsheetUpdateWizard.mxml" swfName="SpreadsheetUpdateWizard" buildFile="perspectives/spreadsheet-update-module.xml"/>
    </target>

    <target name="perspective.connectiondetail">
        <buildSWF mainMXML="com/easyinsight/solutions/ConnectionDetail.mxml" swfName="ConnectionDetail" buildFile="perspectives/connection-detail-module.xml"/>
    </target>

    <target name="perspective.groupdetail">
        <buildSWF mainMXML="com/easyinsight/groups/GroupDetail.mxml" swfName="GroupDetail" buildFile="perspectives/group-detail-module.xml"/>
    </target>

    <target name="app.connectionadmin">
        <buildSWF mainMXML="ConnectionApplication.mxml" swfName="ConnectionApplication" buildFile="connection-admin.xml"/>
    </target>

    <target name="perspective.analysisitemeditor">
        <buildSWF mainMXML="com/easyinsight/analysis/AnalysisItemEditor.mxml" swfName="AnalysisItemEditor" buildFile="perspectives/analysis-item-editor-module.xml"/>
    </target>

    <target name="perspective.kpiwindow">
        <buildSWF mainMXML="com/easyinsight/kpi/KPIModule.mxml" swfName="KPIModule" buildFile="perspectives/kpi-window-module.xml"/>
    </target>

    <target name="perspective.datasourceadmin">
        <buildSWF mainMXML="com/easyinsight/administration/feed/FeedAdministrationContainer.mxml" swfName="DataSourceAdmin" buildFile="perspectives/datasource-admin-module.xml"/>
    </target>

    <target name="report.list">
        <buildSWF mainMXML="com/easyinsight/analysis/list/ListModule.mxml" swfName="ListModule" buildFile="modules/list-module.xml"/>
    </target>

    <target name="report.columnchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/xaxisbased/column/ColumnChartModule.mxml" swfName="ColumnChartModule" buildFile="modules/column-chart-module.xml"/>
    </target>

    <target name="report.column3dchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/xaxisbased/column/Column3DChartModule.mxml" swfName="Column3DChartModule" buildFile="modules/column-3d-chart-module.xml"/>
    </target>

    <target name="report.gantt">
        <buildSWF mainMXML="com/easyinsight/analysis/gantt/GanttModule.mxml" swfName="GanttModule" buildFile="modules/gantt-module.xml"/>
    </target>

    <target name="report.verticallist">
        <buildSWF mainMXML="com/easyinsight/analysis/verticallist/VerticalListModule.mxml" swfName="VerticalList" buildFile="modules/vertical-list-module.xml"/>
    </target>

    <target name="report.combinedverticallist">
        <buildSWF mainMXML="com/easyinsight/analysis/verticallist/CombinedVerticalListModule.mxml" swfName="CombinedVerticalList" buildFile="modules/combined-vertical-list-module.xml"/>
    </target>

    <target name="report.timeline">
        <buildSWF mainMXML="com/easyinsight/analysis/timeline/TimelineModule.mxml" swfName="TimelineModule" buildFile="modules/timeseries-module.xml"/>
    </target>

    <target name="report.piechart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/xaxisbased/pie/PieChartModule.mxml" swfName="PieChartModule" buildFile="modules/pie-chart-module.xml"/>
    </target>

    <target name="report.pie3dchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/xaxisbased/pie/Pie3DChartModule.mxml" swfName="Pie3DChartModule" buildFile="modules/pie-3d-chart-module.xml"/>
    </target>

    <target name="report.form">
        <buildSWF mainMXML="com/easyinsight/analysis/form/FormModule.mxml" swfName="FormModule" buildFile="modules/form-module.xml"/>
    </target>

    <target name="report.barchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/yaxisbased/bar/BarChartModule.mxml" swfName="BarChartModule" buildFile="modules/bar-chart-module.xml"/>
    </target>

    <target name="report.bar3dchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/yaxisbased/bar/Bar3DChartModule.mxml" swfName="Bar3DChartModule" buildFile="modules/bar-3d-chart-module.xml"/>
    </target>

    <target name="report.areachart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/twoaxisbased/area/AreaChartModule.mxml" swfName="AreaChartModule" buildFile="modules/area-chart-module.xml"/>
    </target>

    <target name="report.area3dchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/twoaxisbased/area/Area3DChartModule.mxml" swfName="Area3DChartModule" buildFile="modules/area-3d-chart-module.xml"/>
    </target>

    <target name="report.linechart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/twoaxisbased/line/LineChartModule.mxml" swfName="LineChartModule" buildFile="modules/line-chart-module.xml"/>
    </target>

    <target name="report.line3dchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/twoaxisbased/line/Line3DChartModule.mxml" swfName="Line3DChartModule" buildFile="modules/line-3d-chart-module.xml"/>
    </target>

    <target name="report.bubblechart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/bubble/BubbleChartModule.mxml" swfName="BubbleChartModule" buildFile="modules/bubble-chart-module.xml"/>
    </target>

    <target name="report.stackedcolumnchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/xaxisbased/column/StackedColumnChartModule.mxml" swfName="StackedColumnChartModule" buildFile="modules/stacked-column-chart-module.xml"/>
    </target>

    <target name="report.stackedbarchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/yaxisbased/bar/StackedBarChartModule.mxml" swfName="StackedBarChartModule" buildFile="modules/stacked-bar-chart-module.xml"/>
    </target>

    <target name="report.plotchart">
        <buildSWF mainMXML="com/easyinsight/analysis/charts/plot/PlotChartModule.mxml" swfName="PlotChartModule" buildFile="modules/plot-chart-module.xml"/>
    </target>

    <target name="report.crosstab">
        <buildSWF mainMXML="com/easyinsight/analysis/crosstab/CrosstabModule.mxml" swfName="CrosstabModule" buildFile="modules/crosstab-module.xml"/>
    </target>

    <target name="report.gauge">
        <buildSWF mainMXML="com/easyinsight/analysis/gauge/GaugeModule.mxml" swfName="GaugeModule" buildFile="modules/gauge-module.xml"/>
    </target>

    <target name="report.treemap">
        <buildSWF mainMXML="com/easyinsight/analysis/treemap/TreeMapModule.mxml" swfName="TreeMapModule" buildFile="modules/treemap-module.xml"/>
    </target>

    <target name="report.heatmap">
        <buildSWF mainMXML="com/easyinsight/analysis/heatmap/HeatMapModule.mxml" swfName="HeatMapModule" buildFile="modules/heatmap-module.xml"/>
    </target>

    <target name="report.tree">
        <buildSWF mainMXML="com/easyinsight/analysis/tree/TreeModule.mxml" swfName="TreeModule" buildFile="modules/tree-module.xml"/>
    </target>

    <target name="upload">
        <S3Upload verbose="true"
                  accessId="0AWCBQ78TJR8QCY8ABG2"
                  secretKey="bTUPJqHHeC15+g59BQP8ackadCZj/TsSucNwPwuI"
                  bucket="eiproduction"
                  publicRead="false">
            <fileset dir="${code.path}" includes="code.zip"/>
        </S3Upload>
    </target>

    <target name="uploadStaging">
        <S3Upload verbose="true"
                  accessId="0AWCBQ78TJR8QCY8ABG2"
                  secretKey="bTUPJqHHeC15+g59BQP8ackadCZj/TsSucNwPwuI"
                  bucket="eistaging"
                  publicRead="false">
            <fileset dir="${code.path}" includes="code.zip"/>
        </S3Upload>
    </target>

    <target name="uploadSQL">
        <S3Upload verbose="true"
                  accessId="0AWCBQ78TJR8QCY8ABG2"
                  secretKey="bTUPJqHHeC15+g59BQP8ackadCZj/TsSucNwPwuI"
                  bucket="eisql"
                  publicRead="false">
            <fileset dir="../java/sql" includes="*.sql"/>
        </S3Upload>
    </target>
</project>