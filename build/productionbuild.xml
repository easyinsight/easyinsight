<project default="compileFlex" basedir="." name="Production">
    <property file="local.build.properties"/>
    <taskdef resource="flexTasks.tasks" classpath="${flex.sdk.dir}/ant/lib/flexTasks.jar"/>

    <taskdef name="S3Upload" classname="dak.ant.taskdefs.S3Upload"/>
    <taskdef name="StopInstances" classname="com.easyinsight.watchdog.updatetask.ShutdownAppInstanceTask"/>
    <taskdef name="UpdateInstances" classname="com.easyinsight.watchdog.updatetask.UpdateAppInstanceTask"/>
    <taskdef name="StartInstances" classname="com.easyinsight.watchdog.updatetask.StartAppInstanceTask"/>
    <taskdef name="UpdateDB" classname="com.easyinsight.database.ant.DatabaseUpdateTask"/>
    <taskdef name="StartStaging" classname="com.easyinsight.watchdog.updatetask.StartStagingTask" />
    <taskdef name="UpdateStaging" classname="com.easyinsight.watchdog.updatetask.UpdateStagingTask" />
    <taskdef name="StopStaging" classname="com.easyinsight.watchdog.updatetask.ShutdownStagingTask" />

    <taskdef name="SWFAnalysis" classname="com.easyinsight.swfanalysis.SWFAnalysis"/>
    <taskdef name="SWFSize" classname="com.easyinsight.swfanalysis.ArtifactSize"/>

    <taskdef name="migration" classname="com.easyinsight.database.ant.DatabaseMigrationTask"/>

    <property name="FLEX_HOME" value="${flex.sdk.dir}"/>

    <property name="watchdog.out.path" value="../java/out/watchdog/"/>
    <property name="watchdog.archive.path" value="${watchdog.out.path}/watchdog"/>

    <property name="code.path" value="../java/out/code"/>
    <property name="webapp.path" value="${code.path}/webapp"/>
    <property name="flex.path" value="${webapp.path}/easyui-debug"/>

    <property name="test.path" value="../java/out/test"/>
    <property name="reports.tests" value="../java/out/test/reports"/>

    <property name="ei.key" value="xrnnCqtaFhZN"/>
    <property name="ei.secret.key" value="IzxHGLKiErchVLdo"/>
    <property name="size.api.key" value="LeKXRECmALcL"/>
    <property name="analysis.api.key" value="JeSfljXxeIcw"/>

    <target name="shutdownInstances">
        <StopInstances userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target name="shutdownStagingInstances">
        <StopStaging userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target name="updateInstances">
        <UpdateInstances userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target name="updateStagingInstances">
        <UpdateStaging userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target  name="startStagingInstances">
        <StartStaging userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target name="startInstances">
        <StartInstances userName="einsight" password="eJAqp0Q~j!n>L"/>
    </target>

    <target name="updateDatabase">
        <UpdateDB/>
    </target>

    <target name="migration">
        <migration sqlDirectory="java/sql" databaseName="${database.name}" databaseUserName="${database.username}"
                   databasePassword="${database.password}"/>
    </target>

    <target name="tests">
        <delete dir="${test.path}/classes"/>
        <mkdir dir="${test.path}/classes"/>
        <delete dir="${reports.tests}"/>
        <mkdir dir="${reports.tests}"/>
       <javac destdir="${test.path}/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src"
               excludes="**/*.smap">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="**/test/apithrottling/**"/>
        </javac>
        <junit printsummary="yes" haltonfailure="no" maxmemory="256m">
            <classpath>
                <pathelement location="${test.path}/classes"/>
                <pathelement location="../java/lib/cxf2"/>
                <pathelement location="../java/src"/>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>

            <formatter type="plain"/>

            <batchtest fork="yes" todir="${reports.tests}">
                <fileset dir="../java/src">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

    <target name="appwatchdog">
        <mkdir dir="${watchdog.archive.path}"/>
        <javac destdir="${watchdog.archive.path}"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../build/src"
               excludes="**/*.smap">
            <classpath>
                <fileset dir="../build/lib">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="tags/**"/>
        </javac>
        <unzip dest="${watchdog.archive.path}">
            <fileset dir="../build/lib">
                <include name="*.jar"/>
            </fileset>
        </unzip>
        <jar destfile="${watchdog.out.path}/watchdog.jar" baseDir="${watchdog.archive.path}"/>
    </target>

    <target name="clean">
        <delete dir="${webapp.path}"/>
        <delete dir="${watchdog.archive.path}"/>
        <delete dir="${test.path}/classes"/>
        <delete dir="${reports.tests}"/>
    </target>

    <target name="archive" depends="compileFlex">
        <zip destfile="${code.path}/code.zip" baseDir="${webapp.path}"/>
    </target>

    <target name="quick" depends="clean">
        <mkdir dir="${webapp.path}"/>
        <javac destdir="${webapp.path}/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
        </javac>
    </target>

    <target name="compileJava" depends="clean">
        <mkdir dir="${webapp.path}/WEB-INF/classes"/>
        <mkdir dir="${webapp.path}/assets"/>
        <mkdir dir="${webapp.path}/assets/icons"/>
        <mkdir dir="${webapp.path}/assets/icons/32x32"/>
        <mkdir dir="${webapp.path}/WEB-INF/flex"/>
        <mkdir dir="${webapp.path}/META-INF"/>
        <mkdir dir="${webapp.path}/WEB-INF/lib"/>

        <javac destdir="${webapp.path}/WEB-INF/classes"
               optimize="off"
               debug="on" failonerror="false"
               srcdir="../java/src">
            <classpath>
                <fileset dir="../java/lib/cxf2">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/axis">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/blazeds">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/core">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/commons">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/hibernate">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/google">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/gnip">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="../java/lib/excel">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
            <include name="**"/>
            <exclude name="**/test/**"/>
        </javac>
        <copy flatten="true" todir="${webapp.path}/WEB-INF/lib">
            <fileset dir="../java/lib">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/flex">
            <fileset dir="../java/web/WEB-INF/flex">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/classes">
            <fileset dir="../java/lib/cxf2">
                <include name="**/*.wsdl"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF/classes">
            <fileset dir="../java/src">
                <include name="**/*.properties"/>
                <include name="**/*.xml"/>
                <include name="**/*.jks"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/META-INF">
            <fileset dir="../java/web/META-INF">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/WEB-INF">
            <fileset dir="../java/web/WEB-INF">
                <include name="*.xml"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}">
            <fileset dir="../java/web">
                <include name="**/*"/>
            </fileset>
        </copy>
        <copy todir="${webapp.path}/assets/icons/32x32">
            <fileset dir="../java/web/assets/icons/32x32">
                <include name="**/*"/>
            </fileset>
        </copy>
    </target>

    <target name="compileFlex" depends="compileJava, compileCoreSWC, compileFlexOptimized, compileAdmin, compileEmbeddedInsight, modules1, modules2, modules3, modules4, modules5, modules6">
        <!-- <mxmlc file="${teamcity.build.checkoutDir}/flex/src/PrimaryWorkspace.mxml"
               output="${flex.path}/PrimaryWorkspace.swf"
               static-rsls="true">
            <load-config filename="${teamcity.build.checkoutDir}/flex/flex-config.xml"/>
        </mxmlc> -->
    </target>

    <target name="quickArchive" depends="compileJava, compileFlexOptimized">
        <zip destfile="${code.path}/code.zip" baseDir="${webapp.path}"/>
    </target>

    <target name="compileCoreSWC">
        <compc output="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc">
            <load-config filename="${teamcity.build.checkoutDir}/flex/swc-optimized-config.xml"/>
            <source-path path-element="${teamcity.build.checkoutDir}/flex/swc/core"/>
            <include-sources dir="${teamcity.build.checkoutDir}/flex/swc/core" includes="*"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>
        </compc>
        <unzip src="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc" dest="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp"/>
        <rename src="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/library.swf" dest="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swf"/>
        <copy file="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swf" todir="${flex.path}"/>
        <copy file="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp/EICore.swc" todir="${teamcity.build.checkoutDir}/flex/libs/rsl"/>
        <delete dir="${teamcity.build.checkoutDir}/flex/libs/rsl/tmp"/>
    </target>
    
    <target name="compileFlexOptimized">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/PrimaryWorkspace.mxml" output="${flex.path}/PrimaryWorkspace.swf"
               static-rsls="false" link-report="${basedir}/optimized.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/core-optimized-config.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="compileEmbeddedInsight">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/EmbeddedInsight.mxml" output="${flex.path}/EmbeddedInsight.swf"
               static-rsls="false" link-report="${basedir}/embedded.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/embedded-insight.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>


    </target>

    <target name="compileAdmin">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/AdministrationApplication.mxml" output="${flex.path}/AdministrationApplication.swf"
               static-rsls="true">
            <load-config filename="${teamcity.build.checkoutDir}/flex/administration-app.xml"/>
        </mxmlc>
    </target>

    <target name="compileSpreadsheet">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/customupload/wizard/SpreadsheetWizard.mxml" output="${flex.path}/SpreadsheetWizard.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/perspectives/spreadsheet-wizard-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="compileKPITreeAdmin">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/goals/GoalTreeAdminContainer.mxml" output="${flex.path}/KPITreeAdmin.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/perspectives/kpitree-admin-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="rpc_3.5.0.12683.swz"/>
                <url rsl-url="rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="compileKPITreeView">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/goals/GoalTreeViewContainer.mxml" output="${flex.path}/KPITreeView.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/perspectives/kpitree-view-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="compileDataSourceAdmin">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/administration/feed/FeedAdministrationContainer.mxml" output="${flex.path}/DataSourceAdmin.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/perspectives/datasource-admin-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="modules1" depends="module.area3dchart, module.areachart, module.bar3dchart, module.barchart, module.bubblechart"/>
    <target name="modules2" depends="module.column3dchart, module.columnchart, module.line3dchart, module.list"/>
    <target name="modules3" depends="module.pie3dchart, module.piechart, module.plotchart, module.linechart, module.timeline"/>
    <target name="modules4" depends="module.gauge, module.crosstab, module.tree, module.treemap, module.mmlinechart, module.heatmap"/>
    <target name="modules5" depends="module.worldmap, module.usmap, module.americasmap, module.asiamap, module.europemap, module.middleeastmap, module.africamap"/>
    <target name="modules6" depends="compileDataSourceAdmin, compileKPITreeView, compileKPITreeAdmin, compileSpreadsheet"/>

    <target name="module.mmlinechart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/twoaxisbased/line/MultiMeasureLineChartModule.mxml" output="${flex.path}/MultiMeasureLineChartModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/mm-line-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.list">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/list/ListModule.mxml" output="${flex.path}/ListModule.swf"
               static-rsls="false" link-report="${basedir}/list.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/list-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.columnchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/xaxisbased/column/ColumnChartModule.mxml" output="${flex.path}/ColumnChartModule.swf"
               static-rsls="false" link-report="${basedir}/column.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/column-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.column3dchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/xaxisbased/column/Column3DChartModule.mxml" output="${flex.path}/Column3DChartModule.swf"
               static-rsls="false" link-report="${basedir}/column3d.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/column-3d-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.piechart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/xaxisbased/pie/PieChartModule.mxml" output="${flex.path}/PieChartModule.swf"
               static-rsls="false" link-report="${basedir}/pie.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/pie-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.pie3dchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/xaxisbased/pie/Pie3DChartModule.mxml" output="${flex.path}/Pie3DChartModule.swf"
               static-rsls="false" link-report="${basedir}/pie3d.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/pie-3d-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.barchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/yaxisbased/bar/BarChartModule.mxml" output="${flex.path}/BarChartModule.swf"
               static-rsls="false" link-report="${basedir}/bar.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/bar-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.bar3dchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/yaxisbased/bar/Bar3DChartModule.mxml" output="${flex.path}/Bar3DChartModule.swf"
               static-rsls="false" link-report="${basedir}/bar3d.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/bar-3d-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.areachart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/twoaxisbased/area/AreaChartModule.mxml" output="${flex.path}/AreaChartModule.swf"
               static-rsls="false" link-report="${basedir}/area.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/area-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.area3dchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/twoaxisbased/area/Area3DChartModule.mxml" output="${flex.path}/Area3DChartModule.swf"
               static-rsls="false" link-report="${basedir}/area3d.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/area-3d-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.linechart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/twoaxisbased/line/LineChartModule.mxml" output="${flex.path}/LineChartModule.swf"
               static-rsls="false" link-report="${basedir}/line.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/line-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.line3dchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/twoaxisbased/line/Line3DChartModule.mxml" output="${flex.path}/Line3DChartModule.swf"
               static-rsls="false" link-report="${basedir}/line3d.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/line-3d-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.bubblechart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/bubble/BubbleChartModule.mxml" output="${flex.path}/BubbleChartModule.swf"
               static-rsls="false" link-report="${basedir}/bubble.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/bubble-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.timeline">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/timeline/TimelineModule.mxml" output="${flex.path}/TimelineModule.swf"
               static-rsls="false" link-report="${basedir}/timeline.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/timeseries-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.plotchart">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/charts/plot/PlotChartModule.mxml" output="${flex.path}/PlotChartModule.swf"
               static-rsls="false" link-report="${basedir}/plot.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/plot-chart-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.usmap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/UnitedStatesMapModule.mxml" output="${flex.path}/UnitedStatesMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-us-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.europemap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/EuropeMapModule.mxml" output="${flex.path}/EuropeMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-europe-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.asiamap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/AsiaMapModule.mxml" output="${flex.path}/AsiaMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-asia-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.africamap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/AfricaMapModule.mxml" output="${flex.path}/AfricaMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-africa-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.worldmap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/WorldMapModule.mxml" output="${flex.path}/WorldMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-world-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.americasmap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/AmericasModule.mxml" output="${flex.path}/AmericasModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-americas-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.middleeastmap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/maps/MiddleEastMapModule.mxml" output="${flex.path}/MiddleEastMapModule.swf"
               static-rsls="false">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/map-middleeast-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
    </target>

    <target name="module.crosstab">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/crosstab/CrosstabModule.mxml" output="${flex.path}/CrosstabModule.swf"
               static-rsls="false" link-report="${basedir}/crosstab.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/crosstab-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.gauge">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/gauge/GaugeModule.mxml" output="${flex.path}/GaugeModule.swf"
               static-rsls="false" link-report="${basedir}/gauge.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/gauge-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.treemap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/treemap/TreeMapModule.mxml" output="${flex.path}/TreeMapModule.swf"
               static-rsls="false" link-report="${basedir}/treemap.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/treemap-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.heatmap">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/heatmap/HeatMapModule.mxml" output="${flex.path}/HeatMapModule.swf"
               static-rsls="false" link-report="${basedir}/heatmap.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/heatmap-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>

    </target>

    <target name="module.tree">
        <mxmlc file="${teamcity.build.checkoutDir}/flex/src/com/easyinsight/analysis/tree/TreeModule.mxml" output="${flex.path}/TreeModule.swf"
               static-rsls="false" link-report="${basedir}/tree.txt">
            <load-config filename="${teamcity.build.checkoutDir}/flex/modules/tree-module.xml"/>
            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/framework.swc">
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/framework_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/datavisualization.swc">
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/datavisualization_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${FLEX_HOME}/frameworks/libs/rpc.swc">
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swz"/>
                <url rsl-url="http://staging.easy-insight.com/rpc_3.5.0.12683.swf"/>
            </runtime-shared-library-path>

            <runtime-shared-library-path path-element="${teamcity.build.checkoutDir}/flex/libs/rsl/EICore.swc">
                <url rsl-url="https://staging.easy-insight.com/app/easyui-debug/EICore.swf"/>
            </runtime-shared-library-path>
        </mxmlc>
        
    </target>

    <target name="upload">
        <S3Upload verbose="true"
                  accessId="0AWCBQ78TJR8QCY8ABG2"
                  secretKey="bTUPJqHHeC15+g59BQP8ackadCZj/TsSucNwPwuI"
                  bucket="eiproduction"
                  publicRead="false">
            <fileset dir="${code.path}" includes="code.zip"/>
        </S3Upload>
    </target>

    <target name="uploadSQL">
        <S3Upload verbose="true"
                  accessId="0AWCBQ78TJR8QCY8ABG2"
                  secretKey="bTUPJqHHeC15+g59BQP8ackadCZj/TsSucNwPwuI"
                  bucket="eisql"
                  publicRead="false">
            <fileset dir="../java/sql" includes="*.sql"/>
        </S3Upload>
    </target>
</project>