<?xml version="1.0" ?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:Script><![CDATA[
        import mx.managers.PopUpManager;

        [Bindable]
        private var dataSource:String;

        [Bindable]
        private var query:String;

        [Bindable]
        private var queryName:String;

        [Bindable]
        private var operation:int;

        private var _queryConfiguration:QueryConfiguration;

        public function set queryConfiguration(val:QueryConfiguration):void {
            _queryConfiguration = val;
            query = _queryConfiguration.query;
            queryName = _queryConfiguration.name;
            dataSource = _queryConfiguration.dataSource;
            operation = _queryConfiguration.publishMode;
        }

        private function publish():void {
            dispatchEvent(new OpenInEditorEvent(_queryConfiguration));
            PopUpManager.removePopUp(this);
        }
        ]]></mx:Script>
    <mx:VBox>
        <mx:VBox verticalGap="0" borderThickness="5" borderColor="#8296D2" borderStyle="solid" dropShadowEnabled="true" cornerRadius="15"
            paddingLeft="10" paddingBottom="10" paddingRight="10" paddingTop="10" backgroundColor="#E9ECF2">
            <mx:Box width="100%" horizontalAlign="center" paddingTop="5" paddingLeft="5" paddingBottom="5" paddingRight="5">
                <mx:Label text="Edit Query" fontFamily="Tahoma" fontWeight="bold" fontSize="14"/>
                <mx:TextArea text="Because this query has been published, you can't directly edit its contents at this point. If you want to make changes to the query, you need to reenable the Unchecked API for the target data source."
                          fontFamily="Tahoma" fontWeight="bold" fontSize="12" backgroundAlpha="0" borderThickness="0"
                        width="400" height="100"/>
            </mx:Box>
            <mx:Form width="100%" paddingBottom="5" paddingRight="5" paddingTop="5" paddingLeft="5">
                <mx:FormItem label="Query Name:" fontFamily="Tahoma" fontWeight="bold">
                    <mx:TextInput id="nameInput" fontFamily="Lucida Grande" fontWeight="normal" editable="false" text="{queryName}"/>
                </mx:FormItem>
                <mx:FormItem label="Data Source API Key: " fontFamily="Tahoma" fontWeight="bold">
                    <mx:Label text="{dataSource}" fontFamily="Lucida Grande" fontWeight="normal"/>
                </mx:FormItem>
                 <mx:FormItem label="How to Apply Data:">
                    <mx:RadioButtonGroup id="applyDataGroup" selectedValue="{operation}" enabled="false"/>
                    <mx:RadioButton group="{applyDataGroup}" label="Replace All Existing Data" value="1"/>
                    <mx:RadioButton group="{applyDataGroup}" label="Append Onto Any Existing Data" value="2"/>
                    <mx:RadioButton group="{applyDataGroup}" label="Replace Today's Data" value="3"/>
                </mx:FormItem>
                <mx:FormItem label="Query: " fontFamily="Tahoma" fontWeight="bold">
                    <mx:TextArea text="{query}" fontFamily="Lucida Grande" fontWeight="normal" backgroundAlpha="0" width="300" height="80" editable="false"/>
                </mx:FormItem>
            </mx:Form>
            <mx:HBox width="100%" horizontalAlign="center">
                <mx:Button label="Edit Query in Database Explorer" fontSize="14" click="publish()" fontWeight="bold"/>
                <mx:Button label="Cancel" click="PopUpManager.removePopUp(this)"/>
            </mx:HBox>
        </mx:VBox>
    </mx:VBox>
    <mx:StringValidator id="nameValidator" source="{nameInput}" minLength="3" property="text"/>
</mx:TitleWindow>