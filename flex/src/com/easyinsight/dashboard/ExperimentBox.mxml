<?xml version="1.0"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="com.easyinsight.util.*" horizontalAlign="center" horizontalGap="2">
    <mx:Script><![CDATA[
        import com.easyinsight.analysis.EmbeddedViewFactory;
        import com.easyinsight.genredata.AnalyzeEvent;
        import com.easyinsight.report.BreadCrumb;
        import com.easyinsight.report.ReportAnalyzeSource;
        import com.easyinsight.report.ReportExportWindow;
        import com.easyinsight.solutions.InsightDescriptor;
        import com.easyinsight.util.PopUpUtil;

        import mx.core.Application;
        import mx.managers.PopUpManager;

        public var viewFactory:EmbeddedViewFactory;
        public var insightDescriptor:InsightDescriptor;
        public var dashboardDescriptor:DashboardDescriptor;

        private function exportReport():void {
            viewFactory.updateExportMetadata();
            var window:ReportExportWindow = new ReportExportWindow();
            window.report = viewFactory.report;
            window.coreView = viewFactory.getChildAt(0);
            PopUpManager.addPopUp(window, Application(Application.application), true);
            PopUpUtil.centerPopUp(window);
            PopUpManager.removePopUp(this);
        }

        private function navigateToReport():void {
            var _breadCrumbs:Array = [];
            _breadCrumbs.push(new BreadCrumb(dashboardDescriptor, null));
            viewFactory.dispatchEvent(new AnalyzeEvent(new ReportAnalyzeSource(insightDescriptor, null, null, null, 0, _breadCrumbs)));
            PopUpManager.removePopUp(this);
        }

        private function configure():void {
            // nothing yet
        }
        ]]></mx:Script>
    <mx:Button label="Export Report" click="exportReport()" styleName="dashboardGrayButton"/>
    <mx:Button label="Navigate to Report" click="navigateToReport()" styleName="dashboardGrayButton"/>
    <!--<mx:Button label="Configure" click="configure()" styleName="dashboardGrayButton"/>-->
</mx:HBox>
