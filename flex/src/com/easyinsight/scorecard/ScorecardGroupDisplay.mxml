<?xml version="1.0" ?>
<scorecard:ScorecardDisplay xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:scorecard="com.easyinsight.scorecard.*">
    <mx:Script><![CDATA[
        import com.easyinsight.util.ProgressAlert;

        import mx.events.CloseEvent;
        import mx.controls.Alert;
        
        private var _groupID:int;

        public function set groupID(value:int):void {
            _groupID = value;
        }

        override protected function retrieveScorecards():void {
            scorecardService.getScorecardDescriptorsForGroup.send(_groupID);
        }

        override protected function createGroupText(selectedScorecard:ScorecardDescriptor):String {
            return "";
        }

        private function gotDescriptors():void {
            handleDescriptors(scorecardService.getScorecardDescriptorsForGroup.lastResult as ScorecardList);
        }

        override protected function anyDataCase():Boolean {
            return false;
        }

        override protected function configureRenderer(scorecardRenderer:ScorecardRenderer):void {
            scorecardRenderer.groupID = _groupID;
        }

        override protected function configureNewScorecardWindow(scorecardWindow:ScorecardWindow):void {
            scorecardWindow.groupID = _groupID;
        }

        override protected function deleteScorecard():void {
            Alert.show("Are you sure you want to delete the currently selected scorecard?", "Alert", Alert.OK | Alert.CANCEL, null, onClose);
        }

        private function onClose(event:CloseEvent):void {
            if (event.detail == Alert.OK) {
                ProgressAlert.alert(this, "Deleting the scorecard...", null, scorecardService.deleteScorecard, scorecardService.getScorecardDescriptorsForGroup);
                scorecardService.deleteScorecard.send(selectedScorecard.id);
            }
        }
        ]]></mx:Script>
    <mx:RemoteObject id="scorecardService" destination="scorecardService">
        <mx:method name="getScorecardDescriptorsForGroup" result="gotDescriptors()" fault="onFault(event)"/>
        <mx:method name="deleteScorecard" result="deleted()" fault="onFault(event)"/>
    </mx:RemoteObject>
</scorecard:ScorecardDisplay>