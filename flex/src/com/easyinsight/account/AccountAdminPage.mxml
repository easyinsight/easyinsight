<?xml version="1.0" ?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:account="com.easyinsight.account.*" width="100%" height="100%" creationComplete="onCreationComplete()">
    <mx:VBox width="100%" height="100%" horizontalAlign="center">
        <mx:Box width="100%" horizontalAlign="center" backgroundColor="#848080"
                paddingTop="5"
                paddingBottom="5">
            <mx:Label text="Account Administration" fontSize="20" fontFamily="Tahoma" fontWeight="bold" color="#FFFFFF"/>
        </mx:Box>
        <mx:VBox id="accountSettingsBox">     
            <mx:Form>
                <account:AccountType accountInfo="{accountInfo}"/>
                <account:AccountUsers accountInfo="{accountInfo}"/>
                <account:AccountStorage accountInfo="{accountInfo}"/>
                <account:AccountAPIUse accountInfo="{accountInfo}"/>
                <account:AccountState accountInfo="{accountInfo}"/>
                <account:AccountTrialDate accountInfo="{accountInfo}"/>
                <!--<mx:FormItem label="">
                    <mx:Button label="Initial Account Setup..." click="setupWizard()"/>
                </mx:FormItem>-->
                <mx:FormItem label="Account Settings: " fontFamily="Tahoma" fontWeight="bold">
                    <mx:Button label="Edit Account Settings..." click="editAccountSettings()"/>
                </mx:FormItem>
                <mx:FormItem label="">
                    <mx:Button label="View Invoices..." click="invoices()"/>
                </mx:FormItem>
                <mx:FormItem label="">
                    <mx:Button label="Manage Credentials..." click="showPreferences()"/>
                </mx:FormItem>
                <mx:FormItem>
                    <mx:Button label="Change/Update Billing Information..." click="navigateToURL(new URLRequest('billing/billing.jsp'), '_self');"/><mx:Button label="Cancel Account..." click="cancelPaidAccount()"/> 
                </mx:FormItem>
            </mx:Form>
        </mx:VBox>
    </mx:VBox>
    <mx:Script><![CDATA[
        import com.easyinsight.framework.User;
        import com.easyinsight.genredata.AnalyzeEvent;
        import com.easyinsight.preferences.PreferencesWindow;
        import com.easyinsight.util.PopUpUtil;

        import mx.managers.PopUpManager;

        [Bindable]
        public var accountInfo:AccountInfo;

        [Bindable]
        private var showUpgrade:Boolean;

        private function setupWizard():void {
            dispatchEvent(new AnalyzeEvent(new AccountSetupWizardSource()));
        }

        private function onCreationComplete():void {
            showUpgrade = User.getInstance().getAccountType() != Account.ENTERPRISE;
        }

        private function cancelPaidAccount():void {
            var window:CancelPaidAccountWindow = new CancelPaidAccountWindow();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }

        private function editAccountSettings():void {
            var accountSettingsWindow:AccountSettingsWindow = new AccountSettingsWindow();
            PopUpManager.addPopUp(accountSettingsWindow, this, true);
            PopUpUtil.centerPopUp(accountSettingsWindow);
        }

        private function showPreferences():void {
            var window:PreferencesWindow = new PreferencesWindow();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }

        private function invoices():void {
            var window:AccountInvoicing = new AccountInvoicing();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }
        ]]></mx:Script>
</mx:VBox>
