<?xml version="1.0" encoding="utf-8"?>
<mx:Box xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="com.easyinsight.util.*">
	<mx:Metadata>
		[Event(name="analysisStateChange", type="com.easyinsight.analysis.AnalysisStateChangeEvent")]
	</mx:Metadata>
	<mx:Script>
		<![CDATA[
			import com.easyinsight.analysis.AnalysisStateChangeEvent;
			import com.easyinsight.analysis.charts.ChartTypes;
            import com.easyinsight.analysis.charts.bubble.BubbleChartController;
            import com.easyinsight.analysis.charts.plot.PlotChartController;
            import com.easyinsight.analysis.charts.twoaxisbased.area.Area3DChartController;
            import com.easyinsight.analysis.charts.twoaxisbased.area.AreaChartController;
            import com.easyinsight.analysis.charts.twoaxisbased.line.Line3DChartController;
            import com.easyinsight.analysis.charts.twoaxisbased.line.LineChartController;
            import com.easyinsight.analysis.charts.xaxisbased.column.Column3DChartController;
            import com.easyinsight.analysis.charts.xaxisbased.column.ColumnChartController;
            import com.easyinsight.analysis.charts.xaxisbased.pie.Pie3DChartController;
            import com.easyinsight.analysis.charts.xaxisbased.pie.PieChartController;
            import com.easyinsight.analysis.charts.yaxisbased.bar.Bar3DChartController;
            import com.easyinsight.analysis.charts.yaxisbased.bar.BarChartController;
            import com.easyinsight.analysis.crosstab.CrosstabController;
            import com.easyinsight.analysis.maps.MapController;
            import mx.events.MenuEvent;
			
			[Bindable]
            [Embed(source="../../../../assets/table.png")]
            public var listIcon:Class;

            [Bindable]
            [Embed(source="../../../../assets/table2_selection_block.png")]
            public var crosstabIcon:Class;

            [Bindable]
            [Embed(source="../../../../assets/chart_pie2.png")]
            public var graphIcon:Class;
            
            [Bindable]
            [Embed(source="../../../../assets/earth.png")]
            public var yahooMapIcon:Class;
            
            [Bindable]
            private var xmlList:XMLList;
            
            public function set mode(mode:String):void {
            	if (mode == "all") {
            		xmlList = all;
            	} else if (mode == "splitSource") {
            		xmlList = splitSource;
            	} else if (mode == "splitTarget") {
            		xmlList = splitTarget;
            	}
            }
			
			private function itemClickHandler(event:MenuEvent):void {
                if (event.item != null && event.item.@controller != null) {
                    event.currentTarget.label= event.label;
                    var controllerClassName:String = event.item.@controller;
                    var controllerClass:Class = Class(getDefinitionByName(controllerClassName));
                    var controller:IReportController = new controllerClass();
                    dispatchEvent(new AnalysisStateChangeEvent(controller));
                }
            }
            
            public function set selectedLabel(selectedLabel:String):void {
            	p2.label = selectedLabel;          	
            }

            private function blah():void {
                var columnChartController:ColumnChartController;
                var column3DChartController:Column3DChartController;
                var barChartController:BarChartController;
                var bar3DChartController:Bar3DChartController;
                var pieChartController:PieChartController;
                var pie3DChartController:Pie3DChartController;
                var lineChartController:LineChartController;
                var line3DChartController:Line3DChartController;
                var areaChartController:AreaChartController;
                var area3DChartController:Area3DChartController;
                var plotChartController:PlotChartController;
                var bubble3DChartController:BubbleChartController;
                var mapController:MapController;
                var crosstabController:CrosstabController;
            }
		]]>
	</mx:Script>
	  <mx:XMLList id="all">
        <node label="Grid        " icon="{crosstabIcon}">
        	<node label="List" icon="{listIcon}" controller="com.easyinsight.analysis.list.ListController"/>
        	<node label="Crosstab" controller="com.easyinsight.analysis.crosstab.CrosstabController" icon="{crosstabIcon}"/>
        </node>
        <node label="Chart" icon="">
        	<node label="Column">
                <node label="2D Column" icon="" controller="com.easyinsight.analysis.charts.xaxisbased.column.ColumnChartController"/>
                <node label="3D Column" icon="" controller="com.easyinsight.analysis.charts.xaxisbased.column.Column3DChartController"/>
            </node>
        	<node label="Bar" icon="">
                <node label="2D Bar" icon="" controller="com.easyinsight.analysis.charts.yaxisbased.bar.BarChartController"/>
                <node label="3D Bar" icon="" controller="com.easyinsight.analysis.charts.yaxisbased.bar.Bar3DChartController"/>
            </node>
            <node label="Line" icon="">
                <node label="2D Line" icon="" controller="com.easyinsight.analysis.charts.twoaxisbased.line.LineChartController"/>
                <node label="3D Line" icon="" controller="com.easyinsight.analysis.charts.twoaxisbased.line.Line3DChartController"/>
            </node>
            <node label="Pie" icon="">
                <node label="2D Pie" icon="" controller="com.easyinsight.analysis.charts.xaxisbased.pie.PieChartController"/>
                <node label="3D Pie" icon="" controller="com.easyinsight.analysis.charts.xaxisbased.pie.Pie3DChartController"/>
            </node>
        	<node label="Plot" icon="" controller="com.easyinsight.analysis.charts.plot.PlotChartController"/>
        	<node label="Bubble" icon="" controller="com.easyinsight.analysis.charts.bubble.BubbleChartController"/>
            <node label="Area" icon="">
                <node label="2D Area" icon="" controller="com.easyinsight.analysis.charts.twoaxisbased.area.AreaChartController"/>
                <node label="3D Area" icon="" controller="com.easyinsight.analysis.charts.twoaxisbased.area.Area3DChartController"/>
            </node>
        </node>
        <node label="Map" icon="" controller="com.easyinsight.analysis.maps.MapController"/>
        <node label="Split" icon="" state="Split"/>
    </mx:XMLList>
    <mx:XMLList id="splitSource">        
    	<node label="List" state="" icon="{listIcon}"/>        	        
    </mx:XMLList>
    <mx:XMLList id="splitTarget">
        <node label="Grid" icon="">
        	<node label="Crosstab" state="Crosstab" icon="{crosstabIcon}"/>
        </node>
        <node label="Chart" icon="">
        	<node label="Column" state="BasicChart" subState="{ChartTypes.COLUMN_FAMILY}" icon=""/>
        	<node label="Bar" state="BasicChart" subState="{ChartTypes.BAR_FAMILY}" icon=""/>
        	<node label="Line" state="BasicChart" subState="{ChartTypes.LINE_FAMILY}" icon=""/>
        	<node label="Pie" state="BasicChart" subState="{ChartTypes.PIE_FAMILY}" icon=""/>
        </node>
        <node label="Map" icon="">
        	<node label="Country and State" state="ILogMap" icon=""/>
        	<node label="Satellite and Street" state="YahooMap" icon=""/>
        </node>        
    </mx:XMLList>
    <mx:PopUpMenuButton id="p2" 
            dataProvider="{xmlList}"
            labelField="@label" width="100" popUpStyleName="CustomPopupMenu"
            showRoot="false" itemClick="itemClickHandler(event);"/>
</mx:Box>
