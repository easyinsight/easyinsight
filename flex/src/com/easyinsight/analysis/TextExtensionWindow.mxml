<?xml version="1.0"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
         implements="com.easyinsight.analysis.IReportExtensionEditor" label="Text"
        paddingLeft="20" paddingBottom="20" paddingRight="20" paddingTop="20">
    <mx:Script><![CDATA[

        import mx.collections.ArrayCollection;

        private var _analysisItem:AnalysisItem;

        public function save(analysisItem:AnalysisItem):void {
            var ext:TextReportFieldExtension = new TextReportFieldExtension();
            //ext.size = parseInt(fontSizeInput.text);
            ext.fixedWidth = parseInt(fixedWidthInput.text);
            ext.align = alignComboBox.selectedItem as String;
            ext.wordWrap = wordWrapCheckbox.selected;
            ext.sortable = sortableCheckbox.selected;
            ext.ignoreOnSummary = ignoreSummaryCheckBox.selected;
            ext.forceToSummary = forceSummaryCheckbox.selected;
            ext.fixedSort = fixedSortComboBox.selectedItem as String;
            ext.fixedSortOrder = fixedSortStepper.value;
            analysisItem.reportFieldExtension = ext;
        }

        public function set analysisItem(analysisItem:AnalysisItem):void {
            _analysisItem = analysisItem;
            var ext:TextReportFieldExtension = _analysisItem.reportFieldExtension as TextReportFieldExtension;
            if (ext != null) {
                //customFontSize = String(ext.size);
                align = ext.align == null ? "Left" : ext.align;
                wordWrap = ext.wordWrap;
                fixedWidth = String(ext.fixedWidth);
                sortable = ext.sortable;
                ignoreOnSummary = ext.ignoreOnSummary;
                forceToSummary = ext.forceToSummary;
                fixedSort = ext.fixedSort;
                fixedSortOrder = ext.fixedSortOrder;
            }
        }

        public function set analysisItems(analysisItems:ArrayCollection):void {
        }

        [Bindable]
        private var align:String = "Default";

        [Bindable]
        private var fixedWidth:String;

        [Bindable]
        private var wordWrap:Boolean;

        [Bindable]
        private var customFontSize:String;

        [Bindable]
        private var fixedSortOrder:int;

        [Bindable]
        private var fixedSort:String = "Default";

        [Bindable]
        private var ignoreOnSummary:Boolean;
        
        [Bindable]
        private var sortable:Boolean = true;

        [Bindable]
        private var forceToSummary:Boolean = false;
        ]]></mx:Script>
    <mx:Form>
        <mx:FormItem label="Align:">
            <mx:ComboBox id="alignComboBox" selectedItem="{align}">
                <mx:dataProvider>
                    <mx:ArrayCollection>
                        <mx:String>Default</mx:String>
                        <mx:String>Left</mx:String>
                        <mx:String>Center</mx:String>
                        <mx:String>Right</mx:String>
                    </mx:ArrayCollection>
                </mx:dataProvider>
            </mx:ComboBox>
        </mx:FormItem>
        <mx:FormItem label="Fixed Sort:">
            <mx:ComboBox id="fixedSortComboBox" selectedItem="{fixedSort}">
                <mx:dataProvider>
                    <mx:ArrayCollection>
                        <mx:String>Default</mx:String>
                        <mx:String>Ascending</mx:String>
                        <mx:String>Descending</mx:String>
                    </mx:ArrayCollection>
                </mx:dataProvider>
            </mx:ComboBox>
        </mx:FormItem>
        <mx:FormItem label="Fixed Sort Order:">
            <mx:NumericStepper id="fixedSortStepper" value="{fixedSortOrder}"/>
        </mx:FormItem>
        <mx:FormItem label="Fixed Width:">
            <mx:TextInput id="fixedWidthInput" text="{fixedWidth}"/>
        </mx:FormItem>
        <mx:FormItem label="Word Wrap:">
            <mx:CheckBox id="wordWrapCheckbox" selected="{wordWrap}"/>
        </mx:FormItem>
        <mx:FormItem label="Sortable:">
            <mx:CheckBox id="sortableCheckbox" selected="{sortable}"/>
        </mx:FormItem>
        <mx:FormItem label="Ignore on Summary:">
            <mx:CheckBox id="ignoreSummaryCheckBox" selected="{ignoreOnSummary}"/>
        </mx:FormItem>
        <mx:FormItem label="Force to Summary:">
            <mx:CheckBox id="forceSummaryCheckbox" selected="{forceToSummary}"/>
        </mx:FormItem>
    </mx:Form>
</mx:VBox>
