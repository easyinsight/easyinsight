<?xml version="1.0" ?>
<analysis:AnalysisItemDetailEditor xmlns:mx="http://www.adobe.com/2006/mxml"
                                   xmlns:analysis="com.easyinsight.analysis.*" xmlns:util="com.easyinsight.util.*">
    <mx:Script><![CDATA[
        [Bindable]
        private var dateLevel:int;

        [Bindable]
        private var dateFormat:String;

        override public function createAnalysisItem(aggregation:String):AnalysisItem {
            return new AnalysisDateDimension();
        }

        override public function set analysisItem(val:AnalysisItem):void {
            super.analysisItem = val;
            if (val is AnalysisDateDimension) {
                var date:AnalysisDateDimension = val as AnalysisDateDimension;
                dateLevel = date.dateLevel;
                dateFormat = date.customDateFormat;
                outputFormat = date.outputDateFormat;
            }
        }

        override public function save(analysisItem:AnalysisItem):void {
            super.save(analysisItem);
            var date:AnalysisDateDimension = analysisItem as AnalysisDateDimension;
            date.dateLevel = dateBox.selectedItem.data;
            date.customDateFormat = customFormatInput.text;
            date.outputDateFormat = outputFormatInput.text;
        }

        [Bindable]
        private var outputFormat:String;
        ]]></mx:Script>
    <mx:FormItem label="Date Level:" direction="horizontal">
        <util:SmartComboBox id="dateBox" rowCount="12" selectedValue="{dateLevel}" selectedProperty="data">
            <mx:ArrayCollection>
                <mx:Object label="Year" data="{AnalysisItemTypes.YEAR_LEVEL}"/>
                <mx:Object label="Quarter - Year" data="{AnalysisItemTypes.QUARTER_OF_YEAR}"/>
                <mx:Object label="Month - Year" data="{AnalysisItemTypes.MONTH_LEVEL}"/>
                <mx:Object label="Day - Month - Year" data="{AnalysisItemTypes.DAY_LEVEL}"/>
                <mx:Object label="Day - Month - Year - Hour" data="{AnalysisItemTypes.HOUR_LEVEL}"/>
                <mx:Object label="Day - Month - Year - Hour - Minute"
                           data="{AnalysisItemTypes.MINUTE_LEVEL}"/>
                <mx:Object label="Week - Year" data="{AnalysisItemTypes.WEEK_LEVEL}"/>

                <mx:Object label="Quarter" data="{AnalysisItemTypes.QUARTER_OF_YEAR_FLAT}"/>
                <mx:Object label="Month" data="{AnalysisItemTypes.MONTH_FLAT}"/>
                <mx:Object label="Day of Year" data="{AnalysisItemTypes.DAY_OF_YEAR_FLAT}"/>
                <mx:Object label="Day of Week" data="{AnalysisItemTypes.DAY_OF_WEEK_FLAT}"/>
                <mx:Object label="Week of Year" data="{AnalysisItemTypes.WEEK_OF_YEAR_FLAT}"/>
            </mx:ArrayCollection>
        </util:SmartComboBox>
    </mx:FormItem>
    <mx:FormItem label="Custom Input Format (leave blank for default):">
        <mx:TextInput id="customFormatInput" text="{dateFormat}"/>
    </mx:FormItem>
    <mx:FormItem label="Output Format (leave blank for default):">
        <mx:TextInput id="outputFormatInput" text="{outputFormat}"/>
    </mx:FormItem>

</analysis:AnalysisItemDetailEditor>