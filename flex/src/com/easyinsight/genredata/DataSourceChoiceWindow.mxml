<?xml version="1.0" ?>
<util:EISlimWindow xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="com.easyinsight.util.*">
    <mx:Script><![CDATA[
        import com.easyinsight.solutions.DataSourceDescriptor;

        import mx.collections.ArrayCollection;
        import mx.containers.GridItem;
        import mx.containers.GridRow;
        import mx.controls.Alert;
        import mx.controls.LinkButton;
        import mx.controls.RadioButton;
        import mx.managers.PopUpManager;

        private var _sources:ArrayCollection;

        public function set sources(value:ArrayCollection):void {
            _sources = value;
        }

        protected override function createChildren():void {
            super.createChildren();

            for each (var descriptor:DataSourceDescriptor in _sources) {
                var radioButton:RadioButton = new RadioButton();
                var str:String = descriptor.name + "--" + descriptor.description;
                radioButton.label = str;
                radioButton.groupName = "dataSourceGroup";
                radioButton.value = descriptor;
                var gridRow:GridRow = new GridRow();
                var mainItem:GridItem = new GridItem();
                mainItem.addChild(radioButton);
                gridRow.addChild(mainItem);
                if (descriptor.prebuilts != null && descriptor.prebuilts.length > 0) {
                    var lb:LinkButton = new LinkButton();
                    lb.label = "You've already installed for this data source.";
                    var nextItem:GridItem = new GridItem();
                    nextItem.addChild(lb);
                    gridRow.addChild(nextItem);
                }
                grid.addChild(gridRow);

            }
        }

        private function useDataSource():void {
            if (dataSourceGroup.selectedValue == null) {
                Alert.show("You need to select a data source.");
            } else {
                dispatchEvent(new DataSourceSelectionEvent(dataSourceGroup.selectedValue as DataSourceDescriptor));
                PopUpManager.removePopUp(this);
            }
        }
        ]]></mx:Script>

    <mx:Text text="It looks like you have multiple data sources installed into your account which match this report's&#13;data source type. Please choose the one you wish to use for the demonstration of this report:"
            fontSize="14"/>
    <mx:Grid id="grid">

    </mx:Grid>
    <mx:RadioButtonGroup id="dataSourceGroup"/>
    <mx:HBox width="100%" horizontalAlign="center">
        <util:SaveButton label="Use this Data Source" click="useDataSource()"/>
        <util:CancelButton label="Cancel" click="PopUpManager.removePopUp(this)"/>
    </mx:HBox>

</util:EISlimWindow>