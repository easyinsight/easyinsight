<?xml version="1.0"?>
<util:EISlimWindow xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="com.easyinsight.util.*"
        creationComplete="feedService.searchForSubscribedFeeds.send()">
    <mx:Script><![CDATA[
        import com.easyinsight.solutions.DataSourceDescriptor;

        import mx.collections.ArrayCollection;
        import mx.managers.PopUpManager;

        [Bindable]
        public var dataSources:ArrayCollection;

        [Bindable]
        private var index:int;

        private var dataSource:DataSourceDescriptor;

        private function gotDataSources():void {
            dataSources = feedService.searchForSubscribedFeeds.lastResult as ArrayCollection;
        }

        private function save():void {
            dispatchEvent(new KPITreeSetupEvent(DataSourceDescriptor(dataSourceBox.selectedItem)));
            PopUpManager.removePopUp(this);
        }
        ]]></mx:Script>
    <mx:RemoteObject id="feedService" destination="feeds">
        <mx:method name="searchForSubscribedFeeds" result="gotDataSources()"/>
    </mx:RemoteObject>
    <mx:VBox horizontalAlign="center" verticalAlign="middle" width="100%" height="100%">
        <mx:Label text="Which data source do you want to use?" fontSize="16"/>
        <mx:ComboBox dataProvider="{dataSources}" id="dataSourceBox" labelField="name"/>
        <mx:Button label="Use This Data Source" styleName="grayButton" click="save()"/>
    </mx:VBox>

</util:EISlimWindow>