<?xml version="1.0" ?>
<util:EITitleWindow xmlns:util="com.easyinsight.util.*" xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:report="com.easyinsight.report.*"
                backgroundImage="{background2}" backgroundSize="100%"
                width="600" height="500" showCloseButton="true" close="PopUpManager.removePopUp(this)"
                title="{_goalTitle}"
                paddingLeft="5" paddingRight="5" paddingTop="5" paddingBottom="5" left="0" right="0" top="0" bottom="0">
    <mx:Script><![CDATA[
        import com.easyinsight.report.ReportWindowFactory;
        import com.easyinsight.solutions.InsightDescriptor;

        import mx.collections.ArrayCollection;
        import mx.containers.ViewStack;
        import mx.controls.ButtonBar;
        import mx.managers.PopUpManager;

        [Bindable]
        [Embed(source="../../../../assets/background2.JPG")]
        private var background2:Class;

        private var buttonBar:ButtonBar;

        private var _goalTreeNodeData:GoalTreeNodeData;
        private var _startDate:Date;
        private var _endDate:Date;

        [Bindable]
        private var _goalTitle:String;

        private var viewStack:ViewStack;

        [Bindable]
        private var factory:ReportWindowFactory = new ReportWindowFactory();

        [Bindable]
        private var allDescriptors:ArrayCollection;

        public function set goalTreeNodeData(val:GoalTreeNodeData):void {
            _goalTreeNodeData = val;
            var descs:ArrayCollection = new ArrayCollection();
            var history:GoalHistoryDescriptor = new GoalHistoryDescriptor(val.kpi.coreFeedID, val.kpi.coreFeedName);
            history.id = val.goalTreeNodeID;
            descs.addItem(history);
            /*for each (var report:InsightDescriptor in _goalTreeNodeData.associatedInsights) {
                descs.addItem(report);
            }*/
            allDescriptors = descs;
        }        
        ]]></mx:Script>
    <report:MultiScreenView reports="{allDescriptors}" factory="{factory}" showBackButton="false"/>
</util:EITitleWindow>