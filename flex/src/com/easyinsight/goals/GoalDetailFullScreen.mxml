<?xml version="1.0" ?>
<FullScreenPage xmlns:mx="http://www.adobe.com/2006/mxml" xmlns="com.easyinsight.*"
                xmlns:goals="com.easyinsight.goals.*" xmlns:report="com.easyinsight.report.*" width="100%"
                height="100%" implements="com.easyinsight.framework.IFullScreenPage">
    <mx:Script><![CDATA[
        import com.easyinsight.report.ReportWindowFactory;
        import com.easyinsight.solutions.InsightDescriptor;

        import mx.collections.ArrayCollection;
        import mx.containers.ViewStack;
        import mx.controls.ButtonBar;

        [Bindable]
        [Embed(source="../../../../assets/background2.JPG")]
        private var background2:Class;

        private var buttonBar:ButtonBar;

        private var _goalTreeNodeData:GoalTreeNodeData;
        private var _startDate:Date;
        private var _endDate:Date;

        [Bindable]
        private var _goalTitle:String;

        private var viewStack:ViewStack;

        [Bindable]
        private var factory:ReportWindowFactory = new ReportWindowFactory();

        [Bindable]
        private var allDescriptors:ArrayCollection;

        public function set goalTreeNodeData(val:GoalTreeNodeData):void {
            _goalTreeNodeData = val;
            var descs:ArrayCollection = new ArrayCollection();
            var history:GoalHistoryDescriptor = new GoalHistoryDescriptor(val.coreFeedID, val.coreFeedName);
            history.id = val.goalTreeNodeID;
            descs.addItem(history);
            for each (var report:InsightDescriptor in _goalTreeNodeData.associatedInsights) {
                descs.addItem(report);
            }
            allDescriptors = descs;
        }

        override public function cleanup():void {
        }]]></mx:Script>
    <report:MultiScreenView reports="{allDescriptors}" factory="{factory}" showBackButton="true" analysisClose="dispatchEvent(event)"/>
</FullScreenPage>