<?xml version="1.0"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"  backgroundColor="#dff0d8" borderColor="#d6e9c6" cornerRadius="3" verticalAlign="middle" fontSize="14" borderThickness="1" borderStyle="solid"
         paddingLeft="5" paddingTop="5" paddingBottom="5" paddingRight="5">
    <mx:Script><![CDATA[
        import com.easyinsight.framework.User;

        import mx.formatters.DateFormatter;

        private function showNews():void {
            navigateToURL(new URLRequest("https://www.easy-insight.com/app/whatsnew.jsp"));
        }

        override protected function commitProperties():void {
            super.commitProperties();
            var df:DateFormatter = new DateFormatter();
            df.formatString = "MMMM DD, YYYY";
            dateString = "<b>New on " + df.format(User.getInstance().newsDate) + "</b> - " + User.getInstance().newsSubject;
        }

        /*[Bindable]
        private var newText:String = "<b>New on September 21, 2014</b> - We've overhauled the styling of the full interface to match with the HTML5 interface, made significant improvements to the report editor, and much, much more!";*/

        [Bindable]
        private var dateString:String;

        private function dismiss():void {
            userService.dismissNews.send();
            User.getInstance().newsDismissDate = new Date();
            dispatchEvent(new Event('dismissNews'));
        }

        private function dismissed():void {

        }
        ]]></mx:Script>
    <mx:RemoteObject destination="login" id="userService">
        <mx:method name="dismissNews" result="dismissed()"/>
    </mx:RemoteObject>
    <mx:Text maxWidth="550" htmlText="{dateString}" color="#3c763d" styleName="fallThroughFonts"/>
    <mx:VBox>
        <mx:LinkButton label="More Information" color="#2b542c" fontSize="14" styleName="fallThroughFonts" click="showNews()" fontWeight="bold"/>
        <mx:LinkButton label="Dismiss" color="#2b542c" fontSize="14" styleName="fallThroughFonts" click="dismiss()" fontWeight="bold"/>
    </mx:VBox>
</mx:HBox>
