<?xml version="1.0"?>
<util:EITitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:util="com.easyinsight.util.*" height="400" width="700"
        creationComplete="getNews()" backgroundColor="#FFFFFF" horizontalAlign="center">
    <mx:Script><![CDATA[
        import com.easyinsight.account.NewsEntry;

        import mx.collections.ArrayCollection;
        import mx.managers.PopUpManager;

        [Bindable]
        private var newsEntries:ArrayCollection;

        private function getNews():void {
            adminService.getNews.send();
        }

        private function gotNews():void {
            var news:ArrayCollection = adminService.getNews.lastResult as ArrayCollection;
            var reversed:ArrayCollection = new ArrayCollection();
            for (var i:int = news.length - 1; i >= 0; i--) {
                var newsEntry:NewsEntry = news.getItemAt(i) as NewsEntry;
                reversed.addItem(newsEntry);
            }
            newsEntries = reversed;
        }
        ]]></mx:Script>
    <mx:RemoteObject destination="admin" id="adminService">
        <mx:method name="getNews" result="gotNews()"/>
    </mx:RemoteObject>
    <mx:List dataProvider="{newsEntries}" variableRowHeight="true" itemRenderer="com.easyinsight.listing.NewsEntryRenderer" width="100%" height="335"
            verticalScrollPolicy="on" maxHeight="335"/>
    <util:CancelButton label="Close" click="PopUpManager.removePopUp(this)"/>
</util:EITitleWindow>
