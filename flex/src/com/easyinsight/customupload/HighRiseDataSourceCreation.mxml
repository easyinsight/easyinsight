<?xml version="1.0" ?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%" implements="com.easyinsight.customupload.IServerDataSourceCreation"
        >
    <mx:Metadata>
		[Event(name="userConfigComplete", type="com.easyinsight.customupload.UploadConfigEvent")]
		[Event(name="userConfigCancel", type="com.easyinsight.customupload.UploadConfigEvent")]
	</mx:Metadata>
    <mx:Script><![CDATA[
        import com.easyinsight.administration.feed.FeedDefinitionData;
        import com.easyinsight.datasources.HighRiseDataSource;


        import mx.collections.ArrayCollection;
        import mx.controls.Button;


        [Bindable]
        private var url:String;

        public function setupButton(button:Button):Function {
            return null;
        }

        public function get dataSourceDefinition():FeedDefinitionData {
            var obj:HighRiseDataSource = new HighRiseDataSource();
            obj.url = urlInput.text;
            obj.includeEmails = emailsCheckbox.selected;
            obj.includeContactNotes = contactNotesCheckbox.selected;
            obj.includeCompanyNotes = companyNotesCheckbox.selected;
            obj.includeDealNotes = dealNotesCheckbox.selected;
            obj.includeCaseNotes = caseNotesCheckbox.selected;
            obj.additionalTokens = additionalTokens;
            return obj;
        }

        public function set dataSourceDefinition(feedDefinition:FeedDefinitionData):void {
            var ds:HighRiseDataSource = feedDefinition as HighRiseDataSource;
            includeEmails = ds.includeEmails;
            includeContactNotes = ds.includeContactNotes;
            includeCompanyNotes = ds.includeCompanyNotes;
            includeDealNotes = ds.includeDealNotes;
            includeCaseNotes= ds.includeCaseNotes;
            additionalTokens = ds.additionalTokens;
            url = ds.url;
        }

        public function updateDataSource(feedDefinition:FeedDefinitionData):void {
            var ds:HighRiseDataSource = feedDefinition as HighRiseDataSource;
            ds.url = urlInput.text;
            ds.includeEmails = emailsCheckbox.selected;
            ds.includeContactNotes = contactNotesCheckbox.selected;
            ds.includeCompanyNotes = companyNotesCheckbox.selected;
            ds.includeDealNotes = dealNotesCheckbox.selected;
            ds.includeCaseNotes = caseNotesCheckbox.selected;
            ds.additionalTokens = additionalTokens;
            ds.token = userNameInput.text;
        }

        [Bindable]
        private var includeEmails:Boolean;

        [Bindable]
        private var includeContactNotes:Boolean;

        [Bindable]
        private var includeCompanyNotes:Boolean;

        [Bindable]
        private var includeDealNotes:Boolean;

        [Bindable]
        private var includeCaseNotes:Boolean;

        private var additionalTokens:ArrayCollection = new ArrayCollection();

        public function validate():Boolean {
            return true;
        }]]></mx:Script>
    <mx:HBox>
        <mx:Label text="Highrise URL:" width="225" textAlign="right" fontFamily="Tahoma" fontWeight="bold"/>
        <mx:TextInput id="urlInput" fontWeight="normal" fontFamily="Lucida Grande" text="{url}" width="350"/>
    </mx:HBox>
    <mx:TextArea width="700" text="Your Highrise URL is the browser URL you normally use to connect to Highrise. For example, if you access Highrise as yourcompanyname.highrisehq.com, put yourcompanyname in as the Highrise URL."
            editable="false" selectable="false" focusEnabled="false" fontSize="12"/>
    <mx:HBox>
        <mx:Label text="Highrise API Authentication Token:" width="225" textAlign="right" fontFamily="Tahoma" fontWeight="bold"/>
        <mx:TextInput id="userNameInput" fontWeight="normal" fontFamily="Lucida Grande" width="350"/>
    </mx:HBox>
    <mx:Label text="You can find the token on your Highrise page under My Info - API Token." fontSize="12"/>
    <mx:TextArea borderStyle="none" backgroundAlpha="0" editable="false" width="700" height="60" selectable="false" focusEnabled="false"
                 text="The next set of options enable you to control just what data Easy Insight pulls over from your Highrise account. Each of these options will significantly increase the time required to synchronize data, so we recommend that you only enable a given option if you need to report against that particular subject matter."
            fontSize="12"/>
    <mx:HBox width="100%" horizontalAlign="center">
        <mx:Form paddingBottom="0" paddingLeft="0" paddingRight="0" paddingTop="0">
            <mx:FormItem label="Do you want to report on email activity?" direction="horizontal">
                <mx:CheckBox id="emailsCheckbox" selected="{includeEmails}"/>
            </mx:FormItem>
            <mx:FormItem label="Do you want to report on contact notes?" direction="horizontal">
                <mx:CheckBox id="contactNotesCheckbox" selected="{includeContactNotes}"/>
            </mx:FormItem>
            <mx:FormItem label="Do you want to report on company notes?" direction="horizontal">
                <mx:CheckBox id="companyNotesCheckbox" selected="{includeCompanyNotes}"/>
            </mx:FormItem>
        </mx:Form>
        <mx:Form>
            <mx:FormItem label="Do you want to report on deal notes?" direction="horizontal">
                <mx:CheckBox id="dealNotesCheckbox" selected="{includeDealNotes}"/>
            </mx:FormItem>
            <mx:FormItem label="Do you want to report on case notes?" direction="horizontal">
                <mx:CheckBox id="caseNotesCheckbox" selected="{includeCaseNotes}"/>
            </mx:FormItem>
        </mx:Form>
    </mx:HBox>
</mx:VBox>