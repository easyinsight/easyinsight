<?xml version="1.0" ?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%" implements="com.easyinsight.customupload.IServerDataSourceCreation">
    <mx:Metadata>
		[Event(name="userConfigComplete", type="com.easyinsight.customupload.UploadConfigEvent")]
		[Event(name="userConfigCancel", type="com.easyinsight.customupload.UploadConfigEvent")]
	</mx:Metadata>
    <mx:Script><![CDATA[
        import com.easyinsight.administration.feed.FeedDefinitionData;
        import com.easyinsight.datasources.BaseCampDataSource;

        import mx.controls.Button;

        [Bindable]
        private var url:String;
        [Bindable]
        private var archivedIncluded:Boolean;
        [Bindable]
        private var inactiveIncluded:Boolean;
        [Bindable]
        private var milestoneCommentsIncluded:Boolean;
        [Bindable]
        private var todoCommentsIncluded:Boolean;

        public function setupButton(button:Button):Function {
            return null;
        }

        public function get dataSourceDefinition():FeedDefinitionData {
            var obj:BaseCampDataSource = new BaseCampDataSource();
            obj.url = urlInput.text;
            return obj;
        }

        public function set dataSourceDefinition(feedDefinition:FeedDefinitionData):void {
            var ds:BaseCampDataSource = feedDefinition as BaseCampDataSource;
            url = ds.url;
            archivedIncluded = ds.includeArchived;
            inactiveIncluded = ds.includeInactive;
            milestoneCommentsIncluded = ds.includeMilestoneComments;
            todoCommentsIncluded = ds.includeTodoComments;
        }

        public function get savesCredentials():Boolean {
            return false;
        }

        public function updateDataSource(feedDefinition:FeedDefinitionData):void {
            var ds:BaseCampDataSource = feedDefinition as BaseCampDataSource;
            ds.url = urlInput.text;
            ds.includeArchived = archivedCheckbox.selected;
            ds.includeMilestoneComments = milestoneCommentsCheckbox.selected;
            ds.includeTodoComments = todoCommentsCheckbox.selected;
            ds.includeInactive = inactiveCheckbox.selected;
            ds.token = userNameInput.text;
        }

        public function validate():Boolean {
            return true;
        }]]></mx:Script>
    <mx:HBox>
        <mx:Label text="Basecamp URL:" width="250" textAlign="right" fontFamily="Tahoma" fontWeight="bold"/>
        <mx:TextInput id="urlInput" fontWeight="normal" fontFamily="Lucida Grande" text="{url}" width="350"/>
    </mx:HBox>
    <mx:TextArea width="700" text="Your Basecamp URL is the browser URL you normally use to connect to Basecamp. For example, if you access Basecamp as yourcompanyname.basecamphq.com, put yourcompanyname in as the Basecamp URL."
            editable="false" selectable="false" focusEnabled="false" fontSize="12"/>
    <mx:HBox>
        <mx:Label text="Basecamp API Authentication Token:" width="250" textAlign="right" fontFamily="Tahoma" fontWeight="bold"/>
        <mx:TextInput id="userNameInput" fontWeight="normal" fontFamily="Lucida Grande" width="350"/>
    </mx:HBox>
    <mx:Label text="You can find the token on your Basecamp page under My Info - API Token." fontSize="12"/>
    <mx:Form>
        <mx:FormItem label="Include On Hold/Inactive Projects:" direction="horizontal">
            <mx:CheckBox id="inactiveCheckbox" selected="{inactiveIncluded}"/>
            <mx:Label text="What is this?" fontSize="10" textDecoration="underline" toolTip="If you don't have a need to report on inactive projects, you can save time on your synchronization by not pulling those projects across into Easy Insight."/>
        </mx:FormItem>
        <mx:FormItem label="Include Archived Projects:" direction="horizontal">
            <mx:CheckBox id="archivedCheckbox" selected="{archivedIncluded}"/>
            <mx:Label text="What is this?" fontSize="10" textDecoration="underline" toolTip="If you don't have a need to report on archived projects, you can save time on your synchronization by not pulling those projects across into Easy Insight."/>
        </mx:FormItem>
        <mx:FormItem label="Include Milestone Comments:" direction="horizontal">
            <mx:CheckBox id="milestoneCommentsCheckbox" selected="{milestoneCommentsIncluded}"/>
            <mx:Label text="What is this?" fontSize="10" textDecoration="underline" toolTip="If you don't have a need to report on milestone comments, you can save significant time on your synchronization by not pulling that field across into Easy Insight."/>
        </mx:FormItem>
        <mx:FormItem label="Include Todo Comments:" direction="horizontal">
            <mx:CheckBox id="todoCommentsCheckbox" selected="{todoCommentsIncluded}"/>
            <mx:Label text="What is this?" fontSize="10" textDecoration="underline" toolTip="If you don't have a need to report on todo comments, you can save dramatic time on your synchronization by not pulling that field across into Easy Insight. Please note that for performance reasons, only comments associated to open todo items will be pulled across if you enable this option."/>
        </mx:FormItem>
	</mx:Form>
</mx:VBox>