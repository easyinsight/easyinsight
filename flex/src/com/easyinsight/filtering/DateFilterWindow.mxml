<?xml version="1.0" ?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" backgroundColor="#FFFFFF" borderThickness="1" cornerRadius="15" dropShadowEnabled="true"
        borderStyle="solid">
    <mx:Script><![CDATA[
        import com.easyinsight.analysis.AnalysisDefinition;
        import com.easyinsight.analysis.AnalysisItem;

        import mx.managers.PopUpManager;

        public var filterMetadata:FilterMetadata;

        private function addLastValue():void {
            var filter:GenericFilter = new GenericFilter(_feedID, _item, GenericFilter.LAST_VALUE, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addFirstValue():void {
            var filter:GenericFilter = new GenericFilter(_feedID, _item, GenericFilter.FIRST_VALUE, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addNullValue():void {
            var filter:GenericFilter = new GenericFilter(_feedID, _item, GenericFilter.NULL_VALUE, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addFlatValue():void {
            var filter:FlatDateFilter = new FlatDateFilter(_feedID, _item, 0, 0, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addFlatMonthValue():void {
            var filter:FlatMonthDateFilter = new FlatMonthDateFilter(_feedID, _item, 0, 0, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addMultiFlatValue():void {
            var filter:MultiFlatDateFilter = new MultiFlatDateFilter(_feedID, _item, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private function addCutoffFilter():void {
            var filter:MonthCutoffFilter = new MonthCutoffFilter(_feedID, _item, 0, 0);
            dispatchEvent(new FilterCreationEvent(filter));
            PopUpManager.removePopUp(this);
        }

        private var _item:AnalysisItem;
        private var _feedID:int;

        public function set feedID(value:int):void {
            _feedID = value;
        }

        public function set item(value:AnalysisItem):void {
            _item = value;
        }

        private var _report:AnalysisDefinition;

        public function set report(value:AnalysisDefinition):void {
            _report = value;
        }

        private function addAbsolute():void {
            var sliderDateFilter:SliderDateFilter = new SliderDateFilter(_feedID, _item, 0, 0, null, filterMetadata, _report);
            dispatchEvent(new FilterCreationEvent(sliderDateFilter));
            PopUpManager.removePopUp(this);
        }

        private function addRolling():void {
            var rollingFilter:RollingRangeFilter = new RollingRangeFilter(_feedID, _item, null, filterMetadata);
            dispatchEvent(new FilterCreationEvent(rollingFilter));
            PopUpManager.removePopUp(this);
        }

        [Bindable]
        private var stackIndex:int;
        ]]></mx:Script>
    <mx:VBox id="coreBox" paddingTop="5" paddingBottom="5" paddingLeft="5" paddingRight="5" horizontalAlign="center" verticalGap="10">
        <mx:Label text="What type of filter do you want to create?" fontSize="16"/>
        <mx:HBox width="100%" horizontalAlign="center">

            <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addAbsolute()" mouseChildren="false"
                    buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                    id="singleValueBox"
                    rollOver="singleValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                    rollOut="singleValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                <mx:Label text="Absolute" fontSize="14"/>
                <mx:TextArea text="Restrict this field to a date within a certain fixed time range"
                        borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                        textAlign="center"/>
            </mx:VBox>
            <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addRolling()" mouseChildren="false"
                    buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                    id="multiValueBox"
                    rollOver="multiValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                    rollOut="multiValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                <mx:Label text="Rolling" fontSize="14"/>
                <mx:TextArea text="Restrict this field to a rolling time window"
                        borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                        textAlign="center"/>
            </mx:VBox>
        </mx:HBox>
        <mx:ViewStack resizeToContent="true" selectedIndex="{stackIndex}" creationPolicy="all">
            <mx:Box>
                <mx:Button label="Show Me More Types of Filters" click="stackIndex = 1"/>
            </mx:Box>
            <mx:VBox>
                <mx:HBox>
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addLastValue()" mouseChildren="false"
                            buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                            id="patternValueBox"
                            rollOver="patternValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                            rollOut="patternValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                        <mx:Label text="Newest Date" fontSize="14"/>
                        <mx:TextArea text="Restrict this field to the most recent date"
                                borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                textAlign="center"/>
                    </mx:VBox>
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addFirstValue()" mouseChildren="false"
                            buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                            id="firstValueBox"
                            rollOver="firstValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                            rollOut="firstValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                        <mx:Label text="Oldest Date" fontSize="14"/>
                        <mx:TextArea text="Restrict this field to the oldest date"
                                borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                textAlign="center"/>
                    </mx:VBox>
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addNullValue()" mouseChildren="false"
                            buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                            id="nullValueBox"
                            rollOver="nullValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                            rollOut="nullValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                        <mx:Label text="No Date" fontSize="14"/>
                        <mx:TextArea text="Restrict this field to values where this date is not set"
                                borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                textAlign="center"/>
                    </mx:VBox>
                </mx:HBox>
                <mx:HBox width="100%" horizontalAlign="center" id="bottomBox">
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addFlatValue()" mouseChildren="false"
                            buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                            id="flatValueBox"
                            rollOver="flatValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                            rollOut="flatValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                        <mx:Label text="Year" fontSize="14"/>
                        <mx:TextArea text="Restrict this field to a single year"
                                borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                textAlign="center"/>
                    </mx:VBox>
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addFlatMonthValue()" mouseChildren="false"
                                                buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                                                id="singleMonthFlatValueBox"
                                                rollOver="singleMonthFlatValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                                                rollOut="singleMonthFlatValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                                            <mx:Label text="Single Month" fontSize="14"/>
                                            <mx:TextArea text="Restrict this field to one month"
                                                    borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                                    textAlign="center"/>
                                        </mx:VBox>
                    <mx:VBox borderStyle="solid" borderThickness="1" cornerRadius="5" dropShadowEnabled="true" click="addMultiFlatValue()" mouseChildren="false"
                            buttonMode="true" useHandCursor="true" borderColor="#000000" horizontalAlign="center"
                            id="multiFlatValueBox"
                            rollOver="multiFlatValueBox.setStyle('backgroundColor', 0xDDDDDD)"
                            rollOut="multiFlatValueBox.setStyle('backgroundColor', 0xFFFFFF)">
                        <mx:Label text="Multiple Month" fontSize="14"/>
                        <mx:TextArea text="Restrict this field to one or more months"
                                borderStyle="none" backgroundAlpha="0" editable="false" selectable="false" width="200" height="50"
                                textAlign="center"/>
                    </mx:VBox>
                </mx:HBox>
            </mx:VBox>
        </mx:ViewStack>
        <mx:LinkButton label="Cancel" textDecoration="underline" click="PopUpManager.removePopUp(this)"/>
    </mx:VBox>
</mx:Canvas>