<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="handleFlashVars()" xmlns:dashboard="com.easyinsight.dashboard.*"
                paddingTop="0" top="0" borderThickness="0" left="0" paddingLeft="0" right="0" paddingRight="0"
	            bottom="0" paddingBottom="0" backgroundColor="#FFFFFF">
	<mx:Script>
		<![CDATA[
        import com.easyinsight.analysis.AnalysisDateDimension;
        import com.easyinsight.analysis.AnalysisDimension;
        import com.easyinsight.analysis.AnalysisHierarchyItem;
        import com.easyinsight.analysis.AnalysisList;
        import com.easyinsight.analysis.AnalysisMeasure;
        import com.easyinsight.analysis.AnalysisRangeDimension;
        import com.easyinsight.analysis.ComplexAnalysisMeasure;
        import com.easyinsight.analysis.DefaultMenuFactory;
        import com.easyinsight.analysis.EmbeddedControllerLookup;
        import com.easyinsight.analysis.EmbeddedViewFactory;
        import com.easyinsight.analysis.IEmbeddedReportController;
        import com.easyinsight.analysis.PopupMenuFactory;

        import com.easyinsight.analysis.TemporalAnalysisMeasure;
        import com.easyinsight.framework.CredentialsCache;
            import com.easyinsight.framework.WebCredentialsCache;

        import com.easyinsight.report.ReportView;
            [Bindable]
            private var analysisID:int;

            [Bindable]
            private var reportType:int;

            [Bindable]
            private var dataSourceID:int;

            [Bindable]
            private var reportName:String;

            [Bindable]
            private var showFilters:Boolean;

			private function handleFlashVars():void {
                CredentialsCache.initialize(new WebCredentialsCache());
                PopupMenuFactory.menuFactory = new DefaultMenuFactory();
				this.analysisID = int(Application.application.parameters.analysisID);
                this.reportType = int(Application.application.parameters.reportType);
                this.dataSourceID = int(Application.application.parameters.dataSourceID);
                this.reportName = String(Application.application.parameters.reportName);
                this.showFilters = Boolean(Application.application.parameters.showFilters);

                var reportView:ReportView = new ReportView();
                reportView.reportID = analysisID;
                reportView.reportType = reportType;
                reportView.showFilterButton = showFilters;
                reportView.dataSourceID = dataSourceID;
                reportView.showBrowser = true;
                reportView.showLogo = true;
                reportView.prefix = "https://www.easy-insight.com/";
                var controllerClass:Class = EmbeddedControllerLookup.controllerForType(reportType);
                var controller:IEmbeddedReportController = new controllerClass();
                reportView.viewFactory = controller.createEmbeddedView();
                coreBox.addChild(reportView);
			}

            private function dependancies():void {
                var analysisDate:AnalysisDateDimension;
                var dim:AnalysisDimension;
                var measure:AnalysisMeasure;
                var temporal:TemporalAnalysisMeasure;
                var complex:ComplexAnalysisMeasure;
                var range:AnalysisRangeDimension;
                var list:AnalysisList;
                var hierarchy:AnalysisHierarchyItem;
            }
            
		]]>
	</mx:Script>
	<mx:VBox width="100%" height="100%" id="coreBox">

		<!--<dashboard:EmbeddedViewPanel id="panel" analysisID="{analysisID}" reportName="{reportName}"
                dataSourceID="{dataSourceID}" reportType="{reportType}" prefix="https://www.easy-insight.com/"/>-->
	</mx:VBox>
</mx:Application>
