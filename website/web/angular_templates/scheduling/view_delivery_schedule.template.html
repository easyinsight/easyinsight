<form ng-submit="save_schedule()">
    <div class="row scheduleRow">
        <div class="col-md-4">
            How often should this email go out?
        </div>
        <div class="col-md-3">
            <select class="form-control" ng-model="schedule.schedule_type.type">
                <option value="daily">Daily</option>
                <option value="mwf">Monday/Wednesday/Friday</option>
                <option value="tr">Tuesday/Thursday</option>
                <option value="weekdays">Weekdays</option>
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
                <option value="never">Never (Disabled)</option>
            </select>
        </div>
    </div>
    <div class="row scheduleRow" ng-if="schedule.schedule_type.type == 'monthly'">
        <div class="col-md-4">Day of Month</div>
        <div class="col-md-2"><input type="number" step="1" min="1" max="31" value="1" /></div>
    </div>
    <div class="row scheduleRow" ng-if="schedule.schedule_type.type == 'weekly'">
        <div class="col-md-4">Day of Week</div>
        <div class="col-md-3">
            <select class="form-control" ng-model="schedule.schedule_type.day">
                <option value="sunday">Sunday</option>
                <option value="monday">Monday</option>
                <option value="tuesday">Tuesday</option>
                <option value="wednesday">Wednesday</option>
                <option value="thursday">Thursday</option>
                <option value="friday">Friday</option>
                <option value="saturday">Saturday</option>
            </select>
        </div>
    </div>

    <div class="row scheduleRow" ng-if="schedule.schedule_type.type != 'never'">
        <div class="col-md-4">
            What time of day?
        </div>
        <div class="col-md-4">
            <input type="number" style="width:50px" step="1" min="0" max="23" ng-model="schedule.schedule_type.hour" /> : <input type="number" style="width:50px" step="1" min="0" max="59" ng-model="schedule.schedule_type.minute" />
        </div>
    </div>

    <div class="row scheduleRow">
        <div class="col-md-4">Send From: </div>
        <div class="col-md-8"><select class="form-control" ng-model="schedule.sender" ng-options="user.id as full_name(user) for user in add_default(users)" /></div>
    </div>

    <hr style="color: #DDDDDD; border-color: #DDDDDD; background-color: #DDDDDD; height: 1px; border: 0"/>

    <div class="row scheduleRow">
        <div class="col-md-4">Add a Recipient:</div>
        <div class="col-md-8">
            <div class="input-group">
            <input class="form-control" type="text" ng-model="added"
                   typeahead-template-url="/angular_templates/scheduling/addable_typeahead.template.html"
                   typeahead="addable as addable.label for addable in addables()" />
            <span class="input-group-addon btn btn-primary" ng-click="add_selected()">Add</span>
            </div>
        </div>
    </div>

    <div class="row scheduleRow">
        <div class="col-md-4">Recipients:</div><div class="col-md-8"><button type="button" class="btn btn-danger pull-right" ng-click="delete_selected()">Delete Selected</button></div>
    </div>
    <div class="row scheduleRow">
        <div class="col-md-12">
            <table class="table table-striped table-bordered table-condensed reportDashboardTable">
                <thead>
                <tr>
                <th style="width:10px"></th>
                <th>Name</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-if="schedule.users.length == 0 && schedule.groups.length == 0 && all_emails.length == 0">
                    <td colspan="2">There are no recipients yet. Add one now!</td>
                </tr>
                <tr ng-repeat="user in schedule.users">
                    <td><input type="checkbox" ng-model="user.selected" /></td>
                    <td><i style="color:#3276b1" class="glyphicon glyphicon-user" /> {{full_name(user)}}</td>
                </tr>
                <tr ng-repeat="group in schedule.groups">
                    <td><input type="checkbox" ng-model="group.selected" /></td>
                    <td><i style="color:#3276b1" class="glyphicon glyphicon-list" /> {{ group.name }}</td>
                </tr>
                <tr ng-repeat="email in all_emails">
                    <td><input type="checkbox" ng-model="email.selected" /></td>
                    <td><i style="color:#3276b1" class="glyphicon glyphicon-envelope" /> {{ email.email }}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row scheduleRow">
        <div class="col-md-12">
            <input type="submit" value="Save" class="btn btn-primary" ng-if="!is_new" />
            <button type="button" class="btn btn-primary" ng-if="is_new" ng-click="to_email()">Next</button>
        </div>
    </div>
</form>
